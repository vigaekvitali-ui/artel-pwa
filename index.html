<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–ê–†–¢–ï–õ–¨ v3.0 REAL-TIME</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        :root { --blue: #0047ab; --neon: #ff5e00; --bg: #0a0a0a; --text: #bdc3c7; }
        .theme-modern { --blue: #00f2ff; --neon: #00ff41; --bg: #050505; }
        .theme-retro { --blue: #5d4037; --neon: #ff9800; --bg: #1a1a1a; }
        body { background: var(--bg); color: var(--text); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 90px; }
        .page { display: none; padding: 15px; max-width: 800px; margin: 0 auto; }
        .active { display: block !important; }
        .gost-card { border: 1px solid var(--blue); background: rgba(0,71,171,0.1); padding: 12px; margin-bottom: 10px; border-left: 5px solid var(--blue); }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue); z-index: 1000; }
        .nav-item { color: #444; cursor: pointer; }
        .nav-item.active { color: var(--neon); transform: scale(1.2); }
        .btn-pusker { background: var(--blue); color: white; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; text-transform: uppercase; margin: 5px 0; }
        input, select { width: 100%; padding: 10px; background: #000; color: #fff; border: 1px solid var(--blue); box-sizing: border-box; }
        .rank-label { font-size: 0.6rem; padding: 2px 5px; border: 1px solid var(--neon); color: var(--neon); margin-left: 5px; }
        .zone { border: 1px solid var(--blue); padding: 15px; margin-bottom: 15px; text-align: center; }
    </style>
</head>
<body x-data="artelApp" :class="theme" x-init="initApp()">

<header style="padding:15px; text-align:center; border-bottom:2px solid var(--blue); background:#000;">
    <div style="color:var(--neon); font-weight:bold;">–ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê</div>
</header>

<div class="page" :class="{'active': p === 1}">
    <div class="gost-card">
        <h3 style="margin:0; color:var(--neon)" x-text="holiday"></h3>
        <p x-text="murphy"></p>
    </div>
    <div class="gost-card">
        <strong>üìú 10 –ó–ê–ü–û–í–ï–î–ï–ô</strong>
        <div style="font-size:0.75rem; margin-top:5px;">
            <template x-for="(z, i) in zapovedi">
                <div x-text="(i+1) + '. ' + z" style="margin-bottom:3px"></div>
            </template>
        </div>
    </div>
</div>

<div class="page" :class="{'active': p === 2}">
    <template x-if="!isReg">
        <div class="gost-card">
            <h3>–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</h3>
            <input type="text" x-model="userName" placeholder="–ü–æ–∑—ã–≤–Ω–æ–π...">
            <button class="btn-pusker" @click="register()">–í–•–û–î</button>
        </div>
    </template>
    <template x-if="isReg">
        <div>
            <div id="chat-box" style="height:350px; overflow-y:auto; border:1px solid var(--blue); padding:10px; background:#000; margin-bottom:10px;">
                <template x-for="m in msgs">
                    <div style="margin-bottom:10px; border-left:2px solid var(--blue); padding-left:8px;">
                        <span style="font-weight:bold; color:var(--neon)" x-text="m.username"></span>
                        <span class="rank-label" x-text="m.rank"></span>
                        <div x-text="m.text"></div>
                    </div>
                </template>
            </div>
            <div style="display:flex; gap:5px;">
                <input type="text" x-model="newM" @keyup.enter="sendM()" placeholder="–ü—Ä–∏—ë–º...">
                <button @click="sendM()" class="btn-pusker" style="width:80px; margin:0;">–ü–£–°–ö</button>
            </div>
        </div>
    </template>
</div>

<div class="page" :class="{'active': p === 3}">
    <h3 style="color:var(--neon)">–Ø–©–ò–ö–ò (–û–ë–©–ò–ï)</h3>
    <div class="gost-card">
        <input type="text" x-model="boxNote" placeholder="–ó–∞–ø–∏—Å—å –∏–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª...">
        <button class="btn-pusker" @click="saveBox()">–°–û–•–†–ê–ù–ò–¢–¨ –í –ë–ê–ó–£</button>
    </div>
    <div class="gost-card">
        <template x-for="item in boxItems">
            <div style="display:flex; justify-content:space-between; padding:8px; border-bottom:1px solid #222;">
                <span x-text="item.content"></span>
                <button @click="deleteBox(item.id)" style="color:red; background:none; border:none;">[X]</button>
            </div>
        </template>
    </div>
</div>

<div class="page" :class="{'active': p === 4}">
    <input type="text" x-model="q" placeholder="–ü–æ–∏—Å–∫ (–ü–æ–¥—à–∏–ø–Ω–∏–∫, OBD)...">
    <div style="margin-top:10px;">
        <table style="width:100%; font-size:0.8rem; border-collapse:collapse;">
            <thead><tr style="background:var(--blue)"><th>–¢–∏–ø</th><th>–î–∞–Ω–Ω—ã–µ</th></tr></thead>
            <tbody>
                <template x-for="i in tech.filter(x => x.n.includes(q))">
                    <tr><td style="border:1px solid #333; padding:5px" x-text="i.n"></td><td style="border:1px solid #333; padding:5px; color:var(--neon)" x-text="i.v"></td></tr>
                </template>
            </tbody>
        </table>
    </div>
</div>

<div class="page" :class="{'active': p === 5}">
    <h3 style="color:var(--neon)">–ò–ù–ñ–ï–ù–ï–†–ù–´–ï –ü–†–û–ú–¢–´</h3>
    <div class="gost-card">
        <p>–ò—Å–ø–æ–ª—å–∑—É–π "–ü—Ä–æ–º—Ç –ö–æ–≤–±–æ–π" –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ò–ò –ø–æ–¥ –≥–∞—Ä–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏.</p>
        <a href="https://promptcowboy.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">–û–¢–ö–†–´–¢–¨ –ö–û–í–ë–û–Ø</a>
    </div>
</div>

<div class="page" :class="{'active': p === 6}">
    <h3 style="color:var(--neon)">–°–ï–†–í–ò–°–´ (–ù–£–ñ–ï–ù VPN)</h3>
    <template x-for="l in links">
        <a :href="l.u" target="_blank" class="gost-card" style="display:block; text-decoration:none; color:inherit; text-align:center;" x-text="l.n"></a>
    </template>
</div>

<div class="page" :class="{'active': p === 7}">
    <div class="zone">
        <div style="color:var(--neon)">–ê–†–¢–ï–õ–¨–ù–´–ô –¢–ê–ë–ê–ö</div>
        <a href="https://onliner.by" target="_blank" style="color:#fff">–ù–æ–≤–æ—Å—Ç–∏ –ë–µ–ª–∞—Ä—É—Å–∏</a>
    </div>
    <div class="zone">
        <div style="color:var(--neon)">–ê–†–¢–ï–õ–¨–ù–´–ô –ö–û–§–ï</div>
        <a href="https://e-lib.belstu.by" target="_blank" style="color:#fff">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ë–ì–¢–£</a>
    </div>
    <div class="zone">
        <div style="color:var(--neon)">–í–ò–°–ö–™ "–ê–†–¢–ï–õ–¨–ù–´–ô"</div>
        <a href="http://radiopotok.ru" target="_blank" style="color:#fff">–†–∞–¥–∏–æ –∏ –ú—É–∑—ã–∫–∞</a>
    </div>
</div>

<div class="page" :class="{'active': p === 8}">
    <h3 style="color:var(--neon)">–ù–ê–°–¢–†–û–ô–ö–ò</h3>
    <div class="gost-card">
        –¢–ï–ú–´:<br>
        <button class="btn-pusker" @click="theme=''">–ó–ê–í–û–î</button>
        <button class="btn-pusker" @click="theme='theme-modern'">–ù–ï–û–ù</button>
        <button class="btn-pusker" @click="theme='theme-retro'">–†–ï–¢–†–û</button>
    </div>
    <div class="gost-card" style="text-align:center; background:#fff;">
        <div id="qrcode"></div>
    </div>
</div>

<nav class="nav-bar">
    <template x-for="(ic, i) in ['home','message-square','package','wrench','brain','zap','coffee','settings']">
        <div class="nav-item" :class="{'active': p === (i+1)}" @click="p=(i+1); ref()">
            <i :data-lucide="ic"></i>
        </div>
    </template>
</nav>

<script>
    const _URL = 'https://grsszunlfmehyykkvccj.supabase.co';
    const _KEY = 'sb_publishable_lOjqRJ2R_tHLo0GiLPjaYA_6UYCfCaX';
    const supabase = window.supabase ? window.supabase.createClient(_URL, _KEY) : null;

    document.addEventListener('alpine:init', () => {
        Alpine.data('artelApp', () => ({
            p: 1, theme: localStorage.getItem('theme') || '',
            isReg: localStorage.getItem('reg') || false,
            userName: localStorage.getItem('user') || '',
            userRank: localStorage.getItem('rank') || '–õ–∏—á–∏–Ω–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞',
            newM: '', msgs: [], boxNote: '', boxItems: [], q: '',
            holiday: '–ë—É–¥–Ω–∏ –ê—Ä—Ç–µ–ª–∏', murphy: '–ì–∞–π–∫–∞ –≤—Å–µ–≥–¥–∞ –ø–∞–¥–∞–µ—Ç –≤ —Å–∞–º–æ–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ.',
            zapovedi: ['–ù–µ –ª–µ–∑—å –≤ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º','–ò–∑–æ–ª–µ–Ω—Ç–∞ ‚Äî –≤–µ–Ω–µ—Ü —Ç–≤–æ—Ä–µ–Ω–∏—è','–ú–∞—Ç —É—Å–∫–æ—Ä—è–µ—Ç —Ä–µ–º–æ–Ω—Ç'],
            tech: [{n:'–ü–æ–¥—à–∏–ø–Ω–∏–∫ 203', v:'17x40x12'}, {n:'OBD P0300', v:'–ü—Ä–æ–ø—É—Å–∫–∏ –∑–∞–∂–∏–≥–∞–Ω–∏—è'}],
            links: [{n:'Gemini', u:'https://gemini.google.com'}, {n:'Suno', u:'https://suno.com'}],

            async initApp() {
                lucide.createIcons();
                this.genQR();
                if(supabase) {
                    this.fetchMsgs();
                    this.fetchBox();
                    supabase.channel('room1').on('postgres_changes', {event:'*', schema:'public'}, () => {
                        this.fetchMsgs(); this.fetchBox();
                    }).subscribe();
                }
            },
            ref() { setTimeout(() => lucide.createIcons(), 50); },
            register() {
                if(this.userName) {
                    this.isReg = true;
                    localStorage.setItem('reg', true);
                    localStorage.setItem('user', this.userName);
                }
            },
            async fetchMsgs() {
                const {data} = await supabase.from('messages').select('*').order('id', {ascending:false}).limit(20);
                if(data) this.msgs = data.reverse();
            },
            async sendM() {
                if(!this.newM) return;
                await supabase.from('messages').insert([{username:this.userName, text:this.newM, rank:this.userRank}]);
                this.newM = '';
            },
            async fetchBox() {
                const {data} = await supabase.from('boxes').select('*');
                if(data) this.boxItems = data;
            },
            async saveBox() {
                if(!this.boxNote) return;
                await supabase.from('boxes').insert([{content:this.boxNote, user_name:this.userName}]);
                this.boxNote = '';
            },
            async deleteBox(id) {
                await supabase.from('boxes').delete().eq('id', id);
            },
            genQR() {
                const qr = qrcode(0, 'M'); qr.addData(window.location.href); qr.make();
                document.getElementById('qrcode').innerHTML = qr.createImgTag(3);
            }
        }));
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</body>
</html>
