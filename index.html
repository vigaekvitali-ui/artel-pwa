<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê</title>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <style>
        [x-cloak] { display: none !important; }
        :root { 
            --blue-tape: #0047ab; --steel: #bdc3c7; --oil: #111; --neon: #ff5e00;
        }

        /* –¢–µ–º—ã */
        .theme-classic { --bg: #111; --txt: #bdc3c7; --acc: var(--blue-tape); }
        .theme-oil { --bg: #000; --txt: #666; --acc: #333; }
        .theme-rust { --bg: #2a1a0a; --txt: #d2b48c; --acc: #8b4513; }
        .theme-neon { --bg: #050505; --txt: #0f0; --acc: var(--neon); }
        .theme-steel { --bg: #2c3e50; --txt: #fff; --acc: #95a5a6; }

        body { 
            background: var(--bg); color: var(--txt); font-family: 'Courier New', monospace; 
            margin: 0; padding-bottom: 80px; transition: 0.3s; touch-action: pan-y; overflow-x: hidden;
        }

        /* –õ–∞–º–ø–∞ –ò–ù-14 */
        .in-14 { 
            color: var(--neon); text-shadow: 0 0 8px var(--neon); 
            animation: flicker 2s infinite; font-weight: bold;
        }
        @keyframes flicker { 
            0%, 100% { opacity: 1; } 50% { opacity: 0.8; } 52% { opacity: 0.9; } 
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-bar { 
            position: fixed; bottom: 0; width: 100%; background: #000; 
            display: flex; justify-content: space-around; padding: 15px 0; 
            border-top: 2px solid var(--acc); z-index: 999;
        }
        .nav-item { color: #444; transition: 0.3s; cursor: pointer; }
        .nav-item.active { color: var(--acc); transform: scale(1.2); }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –°–≤–∞–π–ø */
        .pages-container { display: flex; transition: transform 0.3s ease-out; width: 800%; }
        .page { width: 12.5%; padding: 20px; box-sizing: border-box; min-height: 100vh; }

        .gost-card { 
            border: 1px solid var(--acc); background: rgba(0,0,0,0.5); 
            padding: 15px; margin-bottom: 15px; border-left: 4px solid var(--acc);
        }

        /* –¢—É–º–±–ª–µ—Ä –ü–£–°–ö */
        .switch-engine {
            width: 50px; height: 30px; background: #333; border: 2px solid var(--acc);
            position: relative; cursor: pointer; border-radius: 4px;
        }
        .switch-handle {
            width: 20px; height: 20px; background: var(--acc); 
            position: absolute; top: 3px; left: 3px; transition: 0.2s;
        }
        .switch-active .switch-handle { left: 23px; box-shadow: 0 0 10px var(--acc); }

        table { width: 100%; border-collapse: collapse; font-size: 0.7rem; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        th { background: var(--acc); color: #fff; }

        .btn-gost { border: 1px solid var(--txt); background: none; color: var(--txt); padding: 5px 10px; cursor: pointer; }
    </style>
</head>
<body x-data="artelApp" :class="currentTheme" @touchstart="ts = $event.touches[0].clientX" @touchend="handleSwipe($event)">

    <header style="text-align: center; padding: 20px; border-bottom: 1px solid var(--acc); background: #000;">
        <h2 style="margin: 0; font-size: 1rem; letter-spacing: 2px;">üõ† –ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê üõ†</h2>
        <div class="in-14" style="font-size: 0.8rem; margin-top: 5px;" x-text="statusLine"></div>
    </header>

    <div class="pages-container" :style="'transform: translateX(-' + ((page-1) * 12.5) + '%)'">
        
        <div class="page">
            <div class="gost-card">
                <div class="in-14" x-text="holidayInfo"></div>
                <div style="font-size: 0.8rem; margin-top: 5px;" x-text="new Date().toLocaleDateString('ru-RB')"></div>
                <div style="margin-top: 10px; font-style: italic;" x-text="'¬´' + dailyQuote + '¬ª'"></div>
            </div>
            <h3 class="in-14">–£–°–¢–ê–í –ê–†–¢–ï–õ–ò</h3>
            <template x-for="(z, i) in zapovedi">
                <div class="gost-card">
                    <strong x-text="(i+1) + '. ' + z.t"></strong>
                    <div style="font-size: 0.8rem; margin-top:5px;" x-text="z.d"></div>
                    <button class="btn-gost" style="margin-top:10px;" @click="z.l++">üëç –ì–û–°–¢–Ω–æ <span x-text="z.l"></span></button>
                </div>
            </template>
        </div>

        <div class="page">
            <h3 class="in-14">–†–ê–î–ò–û–†–£–ë–ö–ê</h3>
            <div style="height: 300px; overflow-y: auto; background: #000; border: 1px solid var(--acc); padding: 10px;">
                <template x-for="m in messages">
                    <div style="margin-bottom: 10px; border-left: 2px solid var(--acc); padding-left: 10px;">
                        <small class="in-14" x-text="m.u"></small>
                        <div x-text="m.t"></div>
                    </div>
                </template>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 15px; align-items: center;">
                <input type="text" x-model="newMsg" style="flex:1; background:#000; color:#fff; border:1px solid var(--acc); padding:10px;" placeholder="–ü—Ä–∏—ë–º...">
                <div class="switch-engine" :class="{'switch-active': msgPending}" @click="sendMsg()">
                    <div class="switch-handle"></div>
                </div>
                <span style="font-size: 0.7rem; font-weight: bold;">–ü–£–°–ö</span>
            </div>
        </div>

        <div class="page">
            <h3 class="in-14">–ó–ê–ù–ê–ß–ö–ê</h3>
            <div class="gost-card"><strong>üì¶ –ë–ò–†–ñ–ê:</strong> –¢—Ä–∞–º–±–ª–µ—Ä –±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π (–Ω–æ–≤—ã–π). –û–±–º–µ–Ω –Ω–∞ —Å–∏–Ω—é—é –∏–∑–æ–ª–µ–Ω—Ç—É.</div>
            <div class="gost-card"><strong>üí° –°–û–í–ï–¢:</strong> –ï—Å–ª–∏ –≥–∞–π–∫–∞ –Ω–µ –∏–¥–µ—Ç, –ø–æ–≥—Ä–µ–π –µ—ë –≥–æ—Ä–µ–ª–∫–æ–π –¥–æ–∫—Ä–∞—Å–Ω–∞.</div>
            <div class="gost-card"><strong>üìú –ê–†–•–ò–í:</strong> <a href="#" style="color:var(--acc)">–°—Ö–µ–º–∞ –≠–ë–£ Bosch.pdf</a></div>
        </div>

        <div class="page">
            <h3 class="in-14">–ì–û–°–¢ –°–ü–†–ê–í–û–ß–ù–ò–ö</h3>
            <table>
                <thead><tr><th>–£–∑–µ–ª</th><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–ì–û–°–¢</th></tr></thead>
                <tbody>
                    <template x-for="r in refs">
                        <tr><td x-text="r.n"></td><td x-text="r.p"></td><td x-text="r.g" class="in-14"></td></tr>
                    </template>
                </tbody>
            </table>
        </div>

        <div class="page"><h3>–ò–ù–¢–ï–ì–†–ê–¶–ò–ò</h3><p>–î–ª—è —Ä–∞–±–æ—Ç—ã –ò–ò –≤–∫–ª—é—á–∏—Ç–µ VPN!</p></div>
        <div class="page"><h3>–ü–†–û–ú–¢–´</h3><div class="gost-card" x-text="currentPrompt"></div></div>
        <div class="page"><h3>–Æ–ú–û–†</h3><div class="gost-card" x-text="currentJoke"></div></div>
        <div class="page"><h3>–ù–ê–°–¢–†–û–ô–ö–ò</h3>
            <select x-model="currentTheme" @change="localStorage.setItem('artel_theme', currentTheme)" style="width:100%; padding:10px; background:#000; color:#fff;">
                <option value="theme-classic">–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞</option>
                <option value="theme-oil">–ú–∞–∑—É—Ç</option>
                <option value="theme-rust">–†–∂–∞–≤—á–∏–Ω–∞</option>
                <option value="theme-neon">–ù–µ–æ–Ω –ò–ù-14</option>
            </select>
            <div id="qrcode" style="margin-top:20px; background:#fff; padding:10px; display:inline-block;"></div>
        </div>
    </div>

    <nav class="nav-bar">
        <template x-for="i in [1,2,3,4,5,6,7,8]">
            <div class="nav-item" :class="{'active': page === i}" @click="page = i">
                <i :data-lucide="icons[i-1]"></i>
            </div>
        </template>
    </nav>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('artelApp', () => ({
                page: 1,
                ts: 0,
                currentTheme: localStorage.getItem('artel_theme') || 'theme-classic',
                statusLine: '–°–ò–°–¢–ï–ú–ê –í –ù–û–†–ú–ï',
                holidayInfo: '–†–ê–ë–û–ß–ê–Ø –°–ú–ï–ù–ê',
                dailyQuote: '–ï—Å–ª–∏ –Ω–µ —Å–ª–æ–º–∞–Ω–æ ‚Äî –Ω–µ —á–∏–Ω–∏.',
                msgPending: false,
                newMsg: '',
                messages: [{u:'–ú–ê–°–¢–û–î–û–ù–¢', t:'–°–≤—è–∑—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –†–∞–±–æ—Ç–∞–µ–º!'}],
                icons: ['home', 'message-square', 'box', 'wrench', 'zap', 'brain', 'laugh', 'settings'],
                zapovedi: [
                    {t:'–¢–ë ‚Äî –Ω–µ –¥–æ–≥–º–∞', d:'–ó–∞–ø–∞—Å–Ω—ã—Ö –ø–∞–ª—å—Ü–µ–≤ –≤ –ê—Ä—Ç–µ–ª–∏ –Ω–µ –≤—ã–¥–∞—é—Ç.', l:10},
                    {t:'–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞', d:'–õ–µ—á–∏—Ç –≤—Å—ë: –æ—Ç —Ä–∞–¥–∏–∞—Ç–æ—Ä–∞ –¥–æ –¥—É—à–∏.', l:88}
                ],
                refs: [{n:'–ú6', p:'–®–∞–≥ 1.0 / –°–≤–µ—Ä–ª–æ 5.0', g:'001'}, {n:'–ú8', p:'–®–∞–≥ 1.25 / –°–≤–µ—Ä–ª–æ 6.8', g:'001'}],
                currentPrompt: '–°–æ–±–µ—Ä–∏ –ß–ü–£ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–∏–Ω—Ç–µ—Ä–∞.',
                currentJoke: '–õ–∏—à–Ω—è—è –¥–µ—Ç–∞–ª—å ‚Äî —ç—Ç–æ –ø–æ–¥–∞—Ä–æ–∫ –∏–Ω–∂–µ–Ω–µ—Ä—É.',

                init() {
                    lucide.createIcons();
                    this.updateCal();
                    this.genQR();
                },

                updateCal() {
                    const h = {'01-01':'–ù–û–í–´–ô –ì–û–î', '07-03':'–î–ï–ù–¨ –ù–ï–ó–ê–í–ò–°–ò–ú–û–°–¢–ò –†–ë', '05-09':'–î–ï–ù–¨ –ü–û–ë–ï–î–´'};
                    const k = new Date().toISOString().slice(5,10);
                    this.holidayInfo = h[k] || '–ë–£–î–ù–ò –ê–†–¢–ï–õ–ò';
                },

                sendMsg() {
                    if(!this.newMsg) return;
                    this.msgPending = true;
                    setTimeout(() => {
                        this.messages.push({u: '–ú–ê–°–¢–ï–†', t: this.newMsg});
                        this.newMsg = '';
                        this.msgPending = false;
                    }, 300);
                },

                handleSwipe(e) {
                    let diff = this.ts - e.changedTouches[0].clientX;
                    if (Math.abs(diff) > 50) {
                        if (diff > 0 && this.page < 8) this.page++;
                        if (diff < 0 && this.page > 1) this.page--;
                    }
                    this.$nextTick(() => lucide.createIcons());
                },

                genQR() {
                    const qr = qrcode(0, 'M');
                    qr.addData(window.location.href);
                    qr.make();
                    document.getElementById('qrcode').innerHTML = qr.createImgTag(4);
                }
            }));
        });
    </script>
</body>
</html>
