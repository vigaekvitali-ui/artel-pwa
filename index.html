<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–†–¢–ï–õ–¨ v3.0 FINAL</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <style>
        [x-cloak] { display: none !important; }
        :root { --blue: #0047ab; --neon: #ff5e00; --bg: #0a0a0a; --text: #bdc3c7; }
        .theme-modern { --blue: #00f2ff; --neon: #00ff41; --bg: #050505; }
        .theme-retro { --blue: #5d4037; --neon: #ff9800; --bg: #1a1a1a; }
        
        body { background: var(--bg); color: var(--text); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 90px; overflow-x: hidden; }
        header { padding: 15px; text-align: center; border-bottom: 2px solid var(--blue); background: #000; color: var(--neon); font-weight: bold; }
        
        .page { display: none; padding: 15px; max-width: 800px; margin: 0 auto; }
        .active { display: block !important; }
        
        .gost-card { border: 1px solid var(--blue); background: rgba(0,71,171,0.1); padding: 15px; margin-bottom: 10px; border-left: 5px solid var(--blue); }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue); z-index: 9999; }
        .nav-item { color: #444; cursor: pointer; }
        .nav-item.active { color: var(--neon); transform: scale(1.2); }
        
        .btn-pusker { background: var(--blue); color: white; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; margin: 5px 0; }
        input { width: 100%; padding: 12px; background: #000; color: #fff; border: 1px solid var(--blue); box-sizing: border-box; }
        
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th, td { border: 1px solid #333; padding: 8px; }
        th { background: var(--blue); }
        .zone { border: 1px solid var(--blue); padding: 15px; margin-bottom: 10px; text-align: center; }
    </style>
</head>
<body x-data="artelApp" :class="theme" x-init="init()">

<header>üõ† –ê–†–¢–ï–õ–¨ –§–û–†–î–û–í–ê –ò –ë–ï–ù–¶–û–í–ê üõ†</header>

<div id="loader" style="text-align:center; padding:50px; color:var(--neon);">–ó–ê–ì–†–£–ó–ö–ê –°–ò–°–¢–ï–ú–´...</div>

<div x-cloak :class="{'active': true}" style="display:none;" x-show="true">
    <div class="page" :class="{'active': p === 1}">
        <div class="gost-card"><h3 x-text="holiday"></h3><p x-text="murphy"></p></div>
        <div class="gost-card"><strong>üìú –£–°–¢–ê–í:</strong><br><template x-for="z in zapovedi"><div style="margin-top:5px;" x-text="z"></div></template></div>
    </div>

    <div class="page" :class="{'active': p === 2}">
        <template x-if="!isReg">
            <div class="gost-card"><input type="text" x-model="userName" placeholder="–ü–æ–∑—ã–≤–Ω–æ–π..."><button class="btn-pusker" @click="register()">–í–•–û–î</button></div>
        </template>
        <template x-if="isReg">
            <div>
                <div id="chat" style="height:300px; overflow-y:auto; border:1px solid var(--blue); padding:10px; background:#000;">
                    <template x-for="m in msgs">
                        <div style="margin-bottom:8px;"><b style="color:var(--neon)" x-text="m.username"></b>: <span x-text="m.text"></span></div>
                    </template>
                </div>
                <div style="display:flex; margin-top:10px;"><input type="text" x-model="newM" @keyup.enter="sendM()"><button @click="sendM()" class="btn-pusker" style="width:80px; margin:0;">–û–ö</button></div>
            </div>
        </template>
    </div>

    <div class="page" :class="{'active': p === 3}">
        <div class="gost-card"><input type="text" x-model="boxNote" placeholder="–í —è—â–∏–∫..."><button class="btn-pusker" @click="saveBox()">–°–û–•–†–ê–ù–ò–¢–¨</button></div>
        <div class="gost-card"><template x-for="b in boxItems"><div style="display:flex; justify-content:space-between; padding:5px; border-bottom:1px solid #222;"><span x-text="b.content"></span><button @click="deleteBox(b.id)" style="color:red; background:none; border:none;">[X]</button></div></template></div>
    </div>

    <div class="page" :class="{'active': p === 4}">
        <input type="text" x-model="q" placeholder="–ü–æ–∏—Å–∫ —Ç–µ—Ö–¥–∞–Ω–Ω—ã—Ö...">
        <table>
            <thead><tr><th>–î–µ—Ç–∞–ª—å</th><th>–†–∞–∑–º–µ—Ä</th></tr></thead>
            <tbody>
                <template x-for="i in tech.filter(x => x.n.includes(q))">
                    <tr><td x-text="i.n"></td><td style="color:var(--neon)" x-text="i.v"></td></tr>
                </template>
            </tbody>
        </table>
    </div>

    <div class="page" :class="{'active': p === 5}">
        <div class="gost-card"><h3>–ü–†–û–ú–¢–´</h3><a href="https://promptcowboy.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">–ö–û–í–ë–û–ô</a></div>
    </div>

    <div class="page" :class="{'active': p === 6}">
        <template x-for="l in links"><a :href="l.u" target="_blank" class="gost-card" style="display:block; text-align:center; text-decoration:none; color:#fff;" x-text="l.n"></a></template>
    </div>

    <div class="page" :class="{'active': p === 7}">
        <div class="zone"><b>–¢–ê–ë–ê–ö –ê–†–¢–ï–õ–ò</b><br><a href="https://onliner.by" style="color:var(--neon)">–ù–æ–≤–æ—Å—Ç–∏ –†–ë</a></div>
        <div class="zone"><b>–ö–û–§–ï –ê–†–¢–ï–õ–ò</b><br><a href="https://e-lib.belstu.by" style="color:var(--neon)">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a></div>
        <div class="zone"><b>–í–ò–°–ö–ò –ê–†–¢–ï–õ–ò</b><br><a href="http://radiopotok.ru" style="color:var(--neon)">–†–∞–¥–∏–æ</a></div>
    </div>

    <div class="page" :class="{'active': p === 8}">
        <div class="gost-card">
            <button class="btn-pusker" @click="theme=''">–ó–ê–í–û–î</button>
            <button class="btn-pusker" @click="theme='theme-modern'">–ù–ï–û–ù</button>
            <button class="btn-pusker" @click="theme='theme-retro'">–†–ï–¢–†–û</button>
        </div>
        <div class="gost-card" style="text-align:center; background:#fff;"><div id="qrcode"></div></div>
    </div>
</div>

<nav class="nav-bar">
    <template x-for="(ic, i) in ['home','message-square','package','wrench','brain','zap','coffee','settings']">
        <div class="nav-item" :class="{'active': p === (i+1)}" @click="p=(i+1); refreshIcons()">
            <i :data-lucide="ic"></i>
        </div>
    </template>
</nav>

<script>
    const _URL = 'https://grsszunlfmehyykkvccj.supabase.co';
    const _KEY = 'sb_publishable_lOjqRJ2R_tHLo0GiLPjaYA_6UYCfCaX';
    let db = null;
    try { db = supabase.createClient(_URL, _KEY); } catch(e) {}

    document.addEventListener('alpine:init', () => {
        Alpine.data('artelApp', () => ({
            p: 1, theme: '', q: '', 
            isReg: localStorage.getItem('reg') || false,
            userName: localStorage.getItem('user') || '',
            msgs: [], boxItems: [], newM: '', boxNote: '',
            holiday: '–°–º–µ–Ω–∞: ' + new Date().toLocaleDateString(),
            murphy: '–ï—Å–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–π –µ–≥–æ.',
            zapovedi: ['1. –ò–∑–æ–ª–µ–Ω—Ç–∞ ‚Äî —Å–∏–ª–∞','2. –ú–∞—Ç ‚Äî —ç—Ç–æ —É—Å–∫–æ—Ä–µ–Ω–∏–µ','3. –õ–∏—à–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π –Ω–µ—Ç'],
            tech: [{n:'–ü–æ–¥—à–∏–ø–Ω–∏–∫ 203', v:'17x40x12'}, {n:'M10', v:'–®–∞–≥ 1.5'}, {n:'OBD P0300', v:'–°–≤–µ—á–∏'}],
            links: [{n:'Gemini AI', u:'https://gemini.google.com'},{n:'Suno Music', u:'https://suno.com'}],

            init() {
                document.getElementById('loader').style.display = 'none';
                lucide.createIcons();
                this.genQR();
                if(db) {
                    this.loadData();
                    db.channel('any').on('postgres_changes', {event:'*', schema:'public'}, () => this.loadData()).subscribe();
                }
            },
            refreshIcons() { setTimeout(() => lucide.createIcons(), 50); },
            register() { if(this.userName) { this.isReg = true; localStorage.setItem('reg', true); localStorage.setItem('user', this.userName); }},
            async loadData() {
                const {data:m} = await db.from('messages').select('*').order('id',{ascending:false}).limit(20);
                if(m) this.msgs = m.reverse();
                const {data:b} = await db.from('boxes').select('*');
                if(b) this.boxItems = b;
            },
            async sendM() { if(!this.newM) return; await db.from('messages').insert([{username:this.userName, text:this.newM}]); this.newM = ''; },
            async saveBox() { if(!this.boxNote) return; await db.from('boxes').insert([{content:this.boxNote, user_name:this.userName}]); this.boxNote = ''; },
            async deleteBox(id) { await db.from('boxes').delete().eq('id', id); },
            genQR() { 
                try {
                    const qr = qrcode(0, 'M'); qr.addData(window.location.href); qr.make();
                    document.getElementById('qrcode').innerHTML = qr.createImgTag(4);
                } catch(e) {}
            }
        }));
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</body>
</html>
