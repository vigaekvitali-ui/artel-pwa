<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0047AB">
    <link rel="manifest" href="manifest.json">
    <title>–°–∏–Ω—è—è –ò–∑–æ–ª–µ–Ω—Ç–∞ | –ê—Ä—Ç–µ–ª—å –§–æ—Ä–¥–æ–≤–∞ –∏ –ë–µ–Ω—Ü–æ–≤–∞</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        /* --- –°–ò–°–¢–ï–ú–ê –¢–ï–ú (CSS Variables) --- */
        :root {
            /* –ö–ª–∞—Å—Å–∏–∫–∞ (–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞) */
            --primary: #0047AB; --secondary: #C0C0C0; --dark: #333333;
            --bg: #f4f4f4; --surface: #ffffff; --text: #1a1a1a; --accent: #ff9800;
        }

        [data-theme="night"] {
            --primary: #0047AB; --bg: #1a1a1a; --surface: #2d2d2d; --text: #f5f5f5; --secondary: #4a4a4a;
        }

        [data-theme="workshop"] {
            --primary: #0047AB; --bg: #f5f5f5; --surface: #e0e0e0; --text: #333; --secondary: #bdbdbd;
        }

        [data-theme="rust"] {
            --primary: #b7410e; --bg: #2d1b0f; --surface: #8b4513; --text: #ffd700; --secondary: #d2691e;
        }

        [data-theme="chrome"] {
            --primary: #404040; --bg: #808080; --surface: #c0c0c0; --text: #000; --secondary: #e0e0e0;
        }

        /* --- –û–ë–©–ò–ï –°–¢–ò–õ–ò --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: 0.3s; overflow-x: hidden; }
        
        header { background: var(--primary); color: white; padding: 10px 20px; position: sticky; top: 0; z-index: 1000; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .logo-wrap { display: flex; align-items: center; gap: 10px; }
        
        main { padding: 15px; padding-bottom: 80px; max-width: 900px; margin: 0 auto; }

        .page { display: none; animation: slideIn 0.3s ease-out; }
        .page.active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        /* --- –ö–û–ú–ü–û–ù–ï–ù–¢–´ --- */
        .card { background: var(--surface); border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative; border-left: 8px solid var(--primary); }
        h2 { margin-top: 0; color: var(--primary); text-transform: uppercase; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }

        /* –ö–ê–õ–ï–ù–î–ê–†–¨ */
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .cal-grid { display: grid; grid-template-cols: repeat(7, 1fr); gap: 5px; }
        .cal-cell { background: var(--bg); aspect-ratio: 1/1; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.9rem; position: relative; cursor: pointer; transition: 0.2s; border: 1px solid var(--secondary); }
        .cal-cell.today { border: 2px solid var(--primary); background: var(--surface); font-weight: bold; transform: scale(1.05); }
        .cal-cell.holiday { color: #e53935; }
        .cal-day-label { font-size: 0.6rem; text-transform: uppercase; opacity: 0.7; margin-bottom: 5px; }
        .cal-note-indicator { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; position: absolute; bottom: 5px; }

        /* –¢–ê–ë–õ–ò–¶–´ */
        .scroll-box { overflow-x: auto; border-radius: 8px; border: 1px solid var(--secondary); }
        table { width: 100%; border-collapse: collapse; background: var(--surface); min-width: 500px; }
        th { background: var(--primary); color: white; padding: 12px; text-align: left; font-size: 0.8rem; }
        td { padding: 12px; border-bottom: 1px solid var(--secondary); font-size: 0.9rem; }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        nav { position: fixed; bottom: 0; width: 100%; background: var(--surface); display: flex; justify-content: space-around; padding: 10px 0; border-top: 2px solid var(--primary); z-index: 1000; }
        .nav-item { background: none; border: none; color: var(--text); opacity: 0.5; display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: 0.3s; }
        .nav-item.active { opacity: 1; color: var(--primary); transform: translateY(-5px); }
        .nav-item i { font-size: 1.5rem; margin-bottom: 4px; font-style: normal; }
        .nav-item span { font-size: 0.6rem; font-weight: bold; }

        /* –ß–ê–¢ */
        #chat-window { height: 400px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px; }
        .msg { padding: 10px 15px; border-radius: 15px; max-width: 80%; font-size: 0.9rem; }
        .msg.sent { align-self: flex-end; background: var(--primary); color: white; }
        .msg.received { align-self: flex-start; background: var(--bg); border: 1px solid var(--secondary); }

        /* –ò–ù–¢–ï–†–§–ï–ô–°–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ */
        input, select, textarea { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--secondary); background: var(--bg); color: var(--text); box-sizing: border-box; }
        .btn-primary { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body data-theme="classic">

<header>
    <div class="logo-wrap">
        <div id="app-logo">
            <svg width="40" height="40" viewBox="0 0 100 100">
                <rect x="10" y="30" width="80" height="40" rx="5" fill="white" transform="rotate(-10 50 50)"/>
                <text x="50" y="65" font-family="Arial Black" font-size="30" fill="#0047AB" text-anchor="middle" transform="rotate(-10 50 50)">Si</text>
            </svg>
        </div>
        <div>
            <div style="font-weight: bold; font-size: 1rem;">–°–ò–ù–Ø–Ø –ò–ó–û–õ–ï–ù–¢–ê</div>
            <div style="font-size: 0.6rem; opacity: 0.8;">–ê—Ä—Ç–µ–ª—å –§–æ—Ä–¥–æ–≤–∞ –∏ –ë–µ–Ω—Ü–æ–≤–∞</div>
        </div>
    </div>
    <div id="offline-indicator" style="display:none; background: #e53935; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem;">–û–§–§–õ–ê–ô–ù</div>
</header>

<main>
    <section id="page-calendar" class="page active">
        <div class="card">
            <div class="cal-header">
                <button onclick="changeMonth(-1)" class="btn-primary" style="padding: 5px 15px;">‚óÄ</button>
                <h3 id="month-name" style="margin:0; color: var(--primary)">–§–µ–≤—Ä–∞–ª—å 2026</h3>
                <button onclick="changeMonth(1)" class="btn-primary" style="padding: 5px 15px;">‚ñ∂</button>
            </div>
            <div class="cal-grid" id="calendar-body">
                </div>
        </div>
        <div class="card" style="border-left-color: var(--accent);">
            <div id="daily-quote" style="font-style: italic; font-size: 0.9rem;">
                "–ï—Å–ª–∏ –¥–µ—Ç–∞–ª—å –Ω–µ –ª–µ–∑–µ—Ç ‚Äî –≤–æ–∑—å–º–∏ –º–æ–ª–æ—Ç–æ–∫ –ø–æ–±–æ–ª—å—à–µ." (–ó–∞–∫–æ–Ω –ú—ë—Ä—Ñ–∏)
            </div>
        </div>
    </section>

    <section id="page-chat" class="page">
        <div class="card">
            <h2>üí¨ –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</h2>
            <div id="chat-window"></div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                <button class="btn-primary" onclick="sendMessage()">–ü–£–°–ö</button>
            </div>
        </div>
    </section>

    <section id="page-stock" class="page">
        <div class="card">
            <h2>üì¶ –°–∫–ª–∞–¥ –ø–æ–¥ –≤–µ—Ä—Å—Ç–∞–∫–æ–º</h2>
            <div id="stock-items"></div>
            <button class="btn-primary" style="width:100%; margin-top:10px;">–î–û–ë–ê–í–ò–¢–¨ –ó–ê–ü–ß–ê–°–¢–¨</button>
        </div>
    </section>

    <section id="page-ref" class="page">
        <div class="card">
            <h2>‚öôÔ∏è –ú–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—å–±—ã</h2>
            <div class="scroll-box">
                <table>
                    <thead>
                        <tr><th>–†–µ–∑—å–±–∞</th><th>–®–∞–≥</th><th>–°–≤–µ—Ä–ª–æ (–º–º)</th><th>–ì–∞–∑–æ–≤—ã–π –∫–ª—é—á</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>M3</td><td>0.5</td><td>2.5</td><td>‚Ññ0</td></tr>
                        <tr><td>M6</td><td>1.0</td><td>5.0</td><td>‚Ññ1</td></tr>
                        <tr><td>M8</td><td>1.25</td><td>6.8</td><td>‚Ññ1</td></tr>
                        <tr><td>M12</td><td>1.75</td><td>10.2</td><td>‚Ññ2</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section id="page-ai" class="page">
        <div class="card">
            <h2>ü§ñ AI –†–µ—Å—É—Ä—Å—ã</h2>
            <div style="display: grid; grid-template-cols: 1fr 1fr; gap: 10px;">
                <button class="btn-primary" onclick="window.open('https://gemini.google.com')">Gemini</button>
                <button class="btn-primary" onclick="window.open('https://canva.com')">Canva</button>
                <button class="btn-primary" onclick="window.open('https://notebooklm.google.com')">NotebookLM</button>
            </div>
        </div>
        <div class="card">
            <h2>üß† –ü—Ä–æ–º—Ç—ã</h2>
            <div style="font-size: 0.8rem; background: var(--bg); padding: 10px; border-radius: 5px;">
                "–°–æ—Å—Ç–∞–≤—å –∞–ª–≥–æ—Ä–∏—Ç–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è, –µ—Å–ª–∏ —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç –∑–∞–∫–ª–∏–Ω–∏–ª–æ –≤ –º–∞–ª–æ–º –∫—Ä—É–≥–µ..."
            </div>
        </div>
    </section>

    <section id="page-humor" class="page">
        <div class="card">
            <h2>üòÇ –Æ–º–æ—Ä</h2>
            <p>–ú–µ—Ö–∞–Ω–∏–∫ ‚Äî —ç—Ç–æ –≤—Ä–∞—á, –ø–∞—Ü–∏–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –º–æ–≥—É—Ç –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è, –Ω–æ –∑–∞—Ç–æ –º–æ–≥—É—Ç –ø–µ—Ä–µ–µ—Ö–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ª–µ—á–µ–Ω–∏—è.</p>
        </div>
    </section>

    <section id="page-settings" class="page">
        <div class="card">
            <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º</h2>
            <select id="theme-selector" onchange="setTheme(this.value)">
                <option value="classic">–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞</option>
                <option value="night">–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º</option>
                <option value="workshop">–°–≤–µ—Ç–ª–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è</option>
                <option value="rust">–†–∂–∞–≤—á–∏–Ω–∞</option>
                <option value="chrome">–•—Ä–æ–º</option>
            </select>
        </div>
        <div class="card">
            <h2>üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</h2>
            <div id="qrcode" style="display:flex; justify-content:center; margin-bottom: 10px;"></div>
            <p style="font-size: 0.7rem; text-align:center;">–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–ø–∞—Ä–Ω–∏–∫–∞</p>
        </div>
    </section>
</main>

<nav>
    <button class="nav-item active" onclick="navTo('calendar')"><i>üìÖ</i><span>–ö–ê–õ</span></button>
    <button class="nav-item" onclick="navTo('chat')"><i>üí¨</i><span>–ß–ê–¢</span></button>
    <button class="nav-item" onclick="navTo('stock')"><i>üì¶</i><span>–°–ö–õ–ê–î</span></button>
    <button class="nav-item" onclick="navTo('ref')"><i>‚öôÔ∏è</i><span>–°–ü–†</span></button>
    <button class="nav-item" onclick="navTo('ai')"><i>ü§ñ</i><span>AI</span></button>
    <button class="nav-item" onclick="navTo('settings')"><i>üõ†</i><span>–£–°–¢</span></button>
</nav>

<script>
    // --- –î–ê–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ---
    const holidays = {
        "01-01": "–ù–æ–≤—ã–π –≥–æ–¥", "01-07": "–†–æ–∂–¥–µ—Å—Ç–≤–æ", "03-08": "8 –ú–∞—Ä—Ç–∞",
        "05-01": "–î–µ–Ω—å –¢—Ä—É–¥–∞", "05-09": "–î–µ–Ω—å –ü–æ–±–µ–¥—ã", "07-03": "–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏",
        "11-07": "–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è —Ä–µ–≤–æ–ª—é—Ü–∏—è", "12-25": "–†–æ–∂–¥–µ—Å—Ç–≤–æ (–∫)"
    };

    const quotes = [
        "–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–π.",
        "–ë—Ä–∏—Ç–≤–∞ –û–∫–∫–∞–º–∞: –Ω–µ —Å–ª–µ–¥—É–µ—Ç –º–Ω–æ–∂–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.",
        "–°–∏–Ω—è—è –∏–∑–æ–ª–µ–Ω—Ç–∞ ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–µ–π. –ï—Å–ª–∏ –Ω–µ –¥–µ—Ä–∂–∏—Ç ‚Äî –∑–Ω–∞—á–∏—Ç, –º–∞–ª–æ –º–æ—Ç–∞–ª.",
        "–ó–∞–∫–æ–Ω –ú—ë—Ä—Ñ–∏: –í—Å—ë, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫, –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫.",
        "–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ß–∏–∑—Ö–æ–ª–º–∞: –ö–æ–≥–¥–∞ –¥–µ–ª–∞ –∏–¥—É—Ç —Ö–æ—Ä–æ—à–æ, —á—Ç–æ-—Ç–æ –¥–æ–ª–∂–Ω–æ —Å–ª—É—á–∏—Ç—å—Å—è –≤ —Å–∞–º–æ–µ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è."
    ];

    // --- –õ–û–ì–ò–ö–ê –ö–ê–õ–ï–ù–î–ê–†–Ø ---
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();

    function renderCalendar() {
        const grid = document.getElementById('calendar-body');
        const monthTitle = document.getElementById('month-name');
        grid.innerHTML = '';

        const d = new Date(currentYear, currentMonth);
        monthTitle.innerText = d.toLocaleString('ru-RU', { month: 'long', year: 'numeric' });

        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const startingPoint = firstDay === 0 ? 6 : firstDay - 1;

        // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏
        for(let i=0; i < startingPoint; i++) grid.innerHTML += '<div></div>';

        for(let day=1; day <= daysInMonth; day++) {
            const dateStr = `${String(currentMonth + 1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
            const isToday = day === new Date().getDate() && currentMonth === new Date().getMonth();
            const holiday = holidays[dateStr];
            
            grid.innerHTML += `
                <div class="cal-cell ${isToday ? 'today' : ''} ${holiday ? 'holiday' : ''}" onclick="addNote(${day})">
                    <span class="cal-day-label">${day}</span>
                    ${holiday ? `<span style="font-size:0.4rem; text-align:center;">${holiday}</span>` : ''}
                </div>`;
        }
    }

    // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
    function navTo(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById('page-' + pageId).classList.add('active');
        event.currentTarget.classList.add('active');
        if(pageId === 'settings') generateQR();
    }

    // --- –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê ---
    function setTheme(theme) {
        document.body.setAttribute('data-theme', theme);
        localStorage.setItem('tape-theme', theme);
    }

    function generateQR() {
        const qrBox = document.getElementById('qrcode');
        qrBox.innerHTML = '';
        new QRCode(qrBox, { text: window.location.href, width: 128, height: 128 });
    }

    function changeMonth(dir) {
        currentMonth += dir;
        if(currentMonth > 11) { currentMonth = 0; currentYear++; }
        if(currentMonth < 0) { currentMonth = 11; currentYear--; }
        renderCalendar();
    }

    // --- –û–§–§–õ–ê–ô–ù –õ–û–ì–ò–ö–ê ---
    window.addEventListener('online', () => document.getElementById('offline-indicator').style.display = 'none');
    window.addEventListener('offline', () => document.getElementById('offline-indicator').style.display = 'block');

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    window.onload = () => {
        renderCalendar();
        const savedTheme = localStorage.getItem('tape-theme');
        if(savedTheme) setTheme(savedTheme);
        document.getElementById('daily-quote').innerText = quotes[Math.floor(Math.random() * quotes.length)];
        
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SW
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(() => console.log("SW Registered"));
        }
    };
</script>
</body>
</html>
