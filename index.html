<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>АРТЕЛЬ ФОРДОВА И БЕНЦОВА v3.0</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        :root { --blue: #0047ab; --neon: #ff5e00; --bg: #0a0a0a; --text: #bdc3c7; }
        
        /* Стили тем */
        .theme-modern { --blue: #00f2ff; --neon: #7000ff; --bg: #050505; }
        .theme-retro { --blue: #8b4513; --neon: #cd7f32; --bg: #1a1410; }

        body { background: var(--bg); color: var(--text); font-family: 'Courier New', monospace; margin: 0; padding-bottom: 90px; }
        .page { display: none; padding: 15px; }
        .active { display: block !important; }
        
        .gost-card { border: 1px solid var(--blue); background: rgba(0,71,171,0.1); padding: 12px; margin-bottom: 10px; border-left: 5px solid var(--blue); }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--blue); z-index: 1000; }
        .nav-item { color: #444; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--neon); }

        .zone { border-bottom: 2px dashed var(--blue); padding: 20px 0; text-align: center; }
        .zone img { width: 150px; height: 150px; border: 1px solid var(--blue); margin-bottom: 10px; filter: grayscale(1); }
        
        .btn-pusker { background: var(--blue); color: white; border: none; padding: 10px; width: 100%; cursor: pointer; font-weight: bold; margin: 5px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th, td { border: 1px solid #333; padding: 5px; }
        th { background: var(--blue); }
    </style>
</head>
<body x-data="artelApp" :class="currentTheme" x-init="initApp()">

<header style="text-align:center; padding:10px; border-bottom:2px solid var(--blue);">
    <h2 class="neon-text">АРТЕЛЬ: ОТДЕЛ МОДЕРНИЗАЦИИ</h2>
</header>

<div class="page" :class="{'active': p === 1}">
    <div class="gost-card">
        <div x-text="holiday"></div>
        <div x-text="murphy"></div>
    </div>
    <div class="gost-card">
        <strong>10 ЗАПОВЕДЕЙ</strong>
        <template x-for="z in zapovedi"><div style="font-size:0.8rem" x-text="z"></div></template>
    </div>
</div>

<div class="page" :class="{'active': p === 2}">
    <template x-if="!isReg">
        <div class="gost-card">
            <h3>РЕГИСТРАЦИЯ В АРТЕЛИ</h3>
            <input type="text" x-model="userName" placeholder="Ваш Позывной">
            <button class="btn-pusker" @click="register()">ПОЛУЧИТЬ РАНГ «ЛИЧИНКА»</button>
        </div>
    </template>
    
    <template x-if="isReg">
        <div>
            <div class="gost-card">
                Вы: <span style="color:var(--neon)" x-text="userName"></span> | Ранг: <span x-text="userRank"></span>
            </div>
            <div id="chat" style="height:250px; overflow-y:auto; border:1px solid var(--blue); padding:10px; background:#000;">
                <template x-for="m in msgs">
                    <div style="margin-bottom:5px; border-bottom:1px solid #222;">
                        <small x-text="m.u + ' (' + m.r + ')'" :style="m.r.includes('Гранд') ? 'color:var(--neon)' : ''"></small>
                        <div x-text="m.t"></div>
                    </div>
                </template>
            </div>
            <input type="text" x-model="newM" @keyup.enter="sendM()" placeholder="Приём...">
            <button class="btn-pusker" @click="sendM()">ПУСК</button>
        </div>
    </template>
</div>

<div class="page" :class="{'active': p === 3}">
    <h3 style="color:var(--neon)">ЯЩИКИ ХРАНЕНИЯ</h3>
    <div class="gost-card">
        <input type="text" x-model="boxNote" placeholder="Записка в ящик...">
        <input type="file" id="fileInput" style="margin-top:10px;">
        <button class="btn-pusker" @click="saveToBox()">ПОЛОЖИТЬ В ЯЩИК</button>
    </div>
    <div class="gost-card">
        <strong>СОДЕРЖИМОЕ:</strong>
        <template x-for="(item, index) in boxItems">
            <div style="display:flex; justify-content:space-between; margin-top:5px; font-size:0.8rem;">
                <span x-text="item.name"></span>
                <button @click="boxItems.splice(index, 1)" style="color:red; background:none; border:none;">[УДАЛИТЬ]</button>
            </div>
        </template>
    </div>
</div>

<div class="page" :class="{'active': p === 4}">
    <input type="text" x-model="techSearch" placeholder="Поиск по базе (OBD, подшипник, резьба)...">
    <div style="display:flex; gap:5px; margin:10px 0;">
        <button class="btn-pusker" @click="techTab='data'">ДАННЫЕ</button>
        <button class="btn-pusker" @click="techTab='obd'">OBD-II КОДЫ</button>
        <button class="btn-pusker" @click="techTab='signs'">ПРИЗНАКИ</button>
    </div>
    
    <div x-show="techTab=='data'">
        <table>
            <thead><tr><th>Тип</th><th>Размер/ГОСТ</th><th>Узел</th></tr></thead>
            <tbody>
                <template x-for="i in techData.filter(d => d.name.includes(techSearch))">
                    <tr><td x-text="i.type"></td><td x-text="i.val"></td><td x-text="i.unit"></td></tr>
                </template>
            </tbody>
        </table>
    </div>

    <div x-show="techTab=='obd'">
        <table>
            <thead><tr><th>Код</th><th>Марка</th><th>Расшифровка</th></tr></thead>
            <tbody>
                <template x-for="o in obdData">
                    <tr><td x-text="o.c"></td><td x-text="o.m"></td><td x-text="o.d"></td></tr>
                </template>
            </tbody>
        </table>
    </div>
</div>

<div class="page" :class="{'active': p === 5}">
    <h3 style="color:var(--neon)">ОБУЧАЛКА ПО ПРОМТАМ</h3>
    <div class="gost-card" style="font-size:0.8rem;">
        <strong>Правило 1:</strong> Роль. "Ты - инженер-механик..."<br>
        <strong>Правило 2:</strong> Задача. "Разработай схему..."<br>
        <strong>Правило 3:</strong> Ограничения. "Без использования сварки..."
    </div>
    <a href="https://promptcowboy.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">ПРОМТ КОВБОЙ</a>
    <a href="https://flowgpt.com" target="_blank" class="btn-pusker" style="display:block; text-align:center; text-decoration:none;">БАЗА ПРОМТОВ</a>
</div>

<div class="page" :class="{'active': p === 6}">
    <h3 style="color:var(--neon)">СЕРВИСЫ И ИИ</h3>
    <template x-for="l in links">
        <a :href="l.url" target="_blank" class="gost-card" style="display:block; text-decoration:none; color:inherit;" x-text="l.n"></a>
    </template>
</div>

<div class="page" :class="{'active': p === 7}">
    <div class="zone">
        <div style="font-weight:bold; color:var(--neon);">[АРТЕЛЬНЫЙ ТАБАК]</div>
        <img src="https://api.dicebear.com/7.x/shapes/svg?seed=smoke" alt="Brand 1">
        <div><a href="https://onliner.by" target="_blank" style="color:var(--text)">Новости Беларуси</a></div>
    </div>
    <div class="zone">
        <div style="font-weight:bold; color:var(--neon);">[АРТЕЛЬНЫЙ КОФЕ]</div>
        <img src="https://api.dicebear.com/7.x/shapes/svg?seed=coffee" alt="Brand 2">
        <div><a href="https://e-lib.belstu.by" target="_blank" style="color:var(--text)">Тех. Библиотека РБ</a></div>
    </div>
    <div class="zone">
        <div style="font-weight:bold; color:var(--neon);">[АРТЕЛЬНЫЙ ВИСКЪ ГОСТ]</div>
        <img src="https://api.dicebear.com/7.x/shapes/svg?seed=whiskey" alt="Brand 3">
        <div><a href="http://radiopotok.ru" target="_blank" style="color:var(--text)">Радиостанции</a></div>
    </div>
</div>

<div class="page" :class="{'active': p === 8}">
    <h3 style="color:var(--neon)">НАСТРОЙКИ ИНТЕРФЕЙСА</h3>
    <div class="gost-card">
        Стиль:<br>
        <button class="btn-pusker" @click="currentTheme=''">СТАНДАРТ</button>
        <button class="btn-pusker" @click="currentTheme='theme-modern'">НОВЫЙ АВТО (NEON)</button>
        <button class="btn-pusker" @click="currentTheme='theme-retro'">РАРИТЕТ (RETRO)</button>
    </div>
    <div class="gost-card" style="text-align:center;">
        <div id="qrcode"></div>
        <small>ПОДКЛЮЧИТЬ ТЕЛЕФОН</small>
    </div>
</div>

<nav class="nav-bar">
    <template x-for="i in [1,2,3,4,5,6,7,8]">
        <div class="nav-item" :class="{'active': p === i}" @click="p=i; ref()">
            <i :data-lucide="icons[i-1]"></i>
        </div>
    </template>
</nav>

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('artelApp', () => ({
            p: 1, techTab: 'data', currentTheme: '',
            isReg: localStorage.getItem('artel_reg') || false,
            userName: localStorage.getItem('artel_name') || '',
            userRank: localStorage.getItem('artel_rank') || 'Личинка инженера',
            newM: '', msgs: [{u:'Гранд-Мастер', r:'Админ', t:'Добро пожаловать в цех!'}],
            boxNote: '', boxItems: [], techSearch: '',
            icons: ['home','message-circle','package','wrench','brain','zap','coffee','settings'],
            links: [{n:'Gemini', url:'https://gemini.google.com'}, {n:'Canva', url:'https://canva.com'}],
            zapovedi: ['1. Не уверен - не крути', '2. Синяя изолента - база'],
            techData: [
                {type:'Подшипник', val:'6204 (20x47x14)', unit:'Генератор'},
                {type:'Резьба', val:'M10 Шаг 1.5', unit:'Стандарт'}
            ],
            obdData: [
                {c:'P0300', m:'Все', d:'Пропуски зажигания'},
                {c:'P0171', m:'Toyota/Lexus', d:'Бедная смесь'}
            ],

            initApp() {
                this.holiday = "Смена: " + new Date().toLocaleDateString();
                this.murphy = "Закон Мерфи: Если что-то может сломаться — сломается.";
                setTimeout(() => { 
                    lucide.createIcons(); 
                    const qr = qrcode(0, 'M'); qr.addData(window.location.href); qr.make();
                    document.getElementById('qrcode').innerHTML = qr.createImgTag(3);
                }, 500);
            },
            ref() { setTimeout(() => lucide.createIcons(), 50); },
            register() {
                if(this.userName) {
                    this.isReg = true;
                    localStorage.setItem('artel_reg', true);
                    localStorage.setItem('artel_name', this.userName);
                    localStorage.setItem('artel_rank', 'Личинка инженера');
                }
            },
            sendM() {
                if(this.newM) {
                    this.msgs.push({u: this.userName, r: this.userRank, t: this.newM});
                    this.newM = '';
                }
            },
            saveToBox() {
                if(this.boxNote) {
                    this.boxItems.push({name: this.boxNote});
                    this.boxNote = '';
                }
            }
        }));
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</body>
</html>
